package {		import br.com.stimuli.loading.BulkLoader;    import br.com.stimuli.loading.BulkProgressEvent;		import flash.display.*;	import flash.net.URLRequest;	import flash.events.*;	public class nerdstream extends Sprite {		// class constants		private var _DOMAIN:String = "http://yankee.sierrabravo.net/";				// image size data		private var _SHOTWIDTH:Number = 220;		private var _SHOTHEIGHT:Number = 165;				private var _HEADERHEIGHT:Number = 101;				private var _loader:BulkLoader = new BulkLoader("nerdStreamImages");				private var _username:String;				private var _starttime:Number = 1110;		private var _endtime:Number = 1125;		private var _captureinterval:Number = 1;		private var _year:String = "2008";		private var _month:String = "07";		private var _day:String = "03";				private var _keys:Array = new Array();				public function queueImages(username:String, row:Number) {			// load images from http://yankee.sierrabravo.net/~username/nerdstream/			var loadURL:String = this._DOMAIN + "~" + username + "/nerdstream/";						this._loader.logLevel = BulkLoader.LOG_INFO;						var i:int;			var filename:String;						for (i = this._starttime; i <= this._endtime; i += this._captureinterval) {					// we need to pad the timestamp to conform to naming conventions										// TODO:  There must be a better way to do this... wrapping time to next hour after it hits 59 minutes...					if (i == 960) i = 1000;					if (i == 1060) i = 1100;					if (i == 1160) i = 1200;					if (i == 1260) i = 1300;					if (i == 1360) i = 1400;					if (i == 1460) i = 1500;					if (i == 1560) i = 1600;					if (i == 1660) i = 1700;										if (i < 1000) { 						this._loader.add(loadURL + this._year + this._month + this._day + "T0" + i + ".jpg", {id:username+i});					}					else {						this._loader.add(loadURL + this._year + this._month + this._day + "T" + i + ".jpg", {id:username+i});					}										this._keys.push(username+i);			}						this._loader.add(loadURL + "latest.jpg", {id:username+"latest"});		}				public function startDownloading():void {			// dispatched when any item has progress:            // this._loader.addEventListener(BulkLoader.PROGRESS, onAllItemsProgress);						// dispatched when ALL the items have been loaded:            this._loader.addEventListener(BulkLoader.COMPLETE, onAllItemsLoaded);						// now start the loading            this._loader.start();		}				public function onAllItemsLoaded(evt:Event):void {			trace('everthing loaded fine.');						// determine how many pictures should go on each row			var shotsPerRow:Number = 16;			var currentRow:Number = 0;			var counter:Number = 1;						// pull all the images out of the bulk loader and throw them on the stage			var xPos:int = 0;						for each (var item in this._keys) {				               	trace("adding " + item + " to row " + currentRow);				var b:Bitmap = _loader.getBitmap(item);				b.x = xPos;				b.y = this._HEADERHEIGHT + (this._SHOTHEIGHT * currentRow);				b.width = this._SHOTWIDTH;				b.height = this._SHOTHEIGHT;								addChild(b);				xPos = xPos + this._SHOTWIDTH;								if (counter++ % shotsPerRow == 0) { currentRow++; xPos = 0; }				            }		}				public function onAllItemsProgress(evt:Event):void {					}					}	}